var mapboxgl=function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e={},r={};Object.defineProperty(r,"__esModule",{value:!0}),r.setMatrixArrayType=function(t){r.ARRAY_TYPE=i=t},r.toRadian=function(t){return t*o},r.equals=function(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))},r.RANDOM=r.ARRAY_TYPE=r.EPSILON=void 0;var n=1e-6;r.EPSILON=n;var i="undefined"!=typeof Float32Array?Float32Array:Array;r.ARRAY_TYPE=i;var a=Math.random;r.RANDOM=a;var o=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var s={};function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}Object.defineProperty(s,"__esModule",{value:!0}),s.create=function(){var t=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},s.clone=function(t){var e=new u.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},s.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},s.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},s.fromValues=function(t,e,r,n){var i=new u.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i},s.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},s.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},s.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*a-i*n;return o?(t[0]=a*(o=1/o),t[1]=-n*o,t[2]=-i*o,t[3]=r*o,t):null},s.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},s.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},s.multiply=h,s.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+a*s,t[1]=i*l+o*s,t[2]=n*-s+a*l,t[3]=i*-s+o*l,t},s.scale=function(t,e,r){var n=e[1],i=e[2],a=e[3],o=r[0],s=r[1];return t[0]=e[0]*o,t[1]=n*o,t[2]=i*s,t[3]=a*s,t},s.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},s.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},s.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},s.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},s.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},s.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},s.subtract=p,s.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},s.equals=function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=e[0],s=e[1],l=e[2],c=e[3];return Math.abs(r-o)<=u.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=u.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=u.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-c)<=u.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},s.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},s.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},s.sub=s.mul=void 0;var u=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==l(t)&&"function"!=typeof t)return{default:t};var r=c(void 0);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}(r);function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(c=function(t){return t?r:e})(t)}function h(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*s+a*l,t[1]=i*s+o*l,t[2]=n*u+a*c,t[3]=i*u+o*c,t}function p(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}s.mul=h,s.sub=p;var f={};function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}Object.defineProperty(f,"__esModule",{value:!0}),f.create=function(){var t=new y.ARRAY_TYPE(6);return y.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},f.clone=function(t){var e=new y.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},f.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},f.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},f.fromValues=function(t,e,r,n,i,a){var o=new y.ARRAY_TYPE(6);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o[4]=i,o[5]=a,o},f.set=function(t,e,r,n,i,a,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t},f.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=r*a-n*i;return l?(t[0]=a*(l=1/l),t[1]=-n*l,t[2]=-i*l,t[3]=r*l,t[4]=(i*s-a*o)*l,t[5]=(n*o-r*s)*l,t):null},f.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},f.multiply=g,f.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*u,t[1]=i*c+o*u,t[2]=n*-u+a*c,t[3]=i*-u+o*c,t[4]=s,t[5]=l,t},f.scale=function(t,e,r){var n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=r[0],u=r[1];return t[0]=e[0]*l,t[1]=n*l,t[2]=i*u,t[3]=a*u,t[4]=o,t[5]=s,t},f.translate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=n*u+a*c+s,t[5]=i*u+o*c+l,t},f.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},f.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},f.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},f.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},f.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},f.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},f.subtract=x,f.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},f.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},f.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},f.equals=function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=e[0],u=e[1],c=e[2],h=e[3],p=e[4],f=e[5];return Math.abs(r-l)<=y.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-u)<=y.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=y.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-h)<=y.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-p)<=y.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-f)<=y.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))},f.sub=f.mul=void 0;var y=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==d(t)&&"function"!=typeof t)return{default:t};var r=m(void 0);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}(r);function m(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(m=function(t){return t?r:e})(t)}function g(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1],h=r[2],p=r[3],f=r[4],d=r[5];return t[0]=n*u+a*c,t[1]=i*u+o*c,t[2]=n*h+a*p,t[3]=i*h+o*p,t[4]=n*f+a*d+s,t[5]=i*f+o*d+l,t}function x(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}f.mul=g,f.sub=x;var v={};function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}Object.defineProperty(v,"__esModule",{value:!0}),v.create=function(){var t=new w.ARRAY_TYPE(9);return w.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},v.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},v.clone=function(t){var e=new w.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},v.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},v.fromValues=function(t,e,r,n,i,a,o,s,l){var u=new w.ARRAY_TYPE(9);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=i,u[5]=a,u[6]=o,u[7]=s,u[8]=l,u},v.set=function(t,e,r,n,i,a,o,s,l,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t[8]=u,t},v.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},v.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},v.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*o-s*u,p=-c*a+s*l,f=u*a-o*l,d=r*h+n*p+i*f;return d?(t[0]=h*(d=1/d),t[1]=(-c*n+i*u)*d,t[2]=(s*n-i*o)*d,t[3]=p*d,t[4]=(c*r-i*l)*d,t[5]=(-s*r+i*a)*d,t[6]=f*d,t[7]=(-u*r+n*l)*d,t[8]=(o*r-n*a)*d,t):null},v.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=o*c-s*u,t[1]=i*u-n*c,t[2]=n*s-i*o,t[3]=s*l-a*c,t[4]=r*c-i*l,t[5]=i*a-r*s,t[6]=a*u-o*l,t[7]=n*l-r*u,t[8]=r*o-n*a,t},v.determinant=function(t){var e=t[3],r=t[4],n=t[5],i=t[6],a=t[7],o=t[8];return t[0]*(o*r-n*a)+t[1]*(-o*e+n*i)+t[2]*(a*e-r*i)},v.multiply=A,v.translate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=r[0],f=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=p*n+f*o+u,t[7]=p*i+f*s+c,t[8]=p*a+f*l+h,t},v.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=Math.sin(r),f=Math.cos(r);return t[0]=f*n+p*o,t[1]=f*i+p*s,t[2]=f*a+p*l,t[3]=f*o-p*n,t[4]=f*s-p*i,t[5]=f*l-p*a,t[6]=u,t[7]=c,t[8]=h,t},v.scale=function(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},v.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},v.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},v.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},v.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},v.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,h=n*s,p=i*o,f=i*s,d=i*l,y=a*o,m=a*s,g=a*l;return t[0]=1-h-d,t[3]=c-g,t[6]=p+m,t[1]=c+g,t[4]=1-u-d,t[7]=f-y,t[2]=p-m,t[5]=f+y,t[8]=1-u-h,t},v.normalFromMat4=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],y=e[13],m=e[14],g=e[15],x=r*s-n*o,v=r*l-i*o,b=r*u-a*o,w=n*l-i*s,_=n*u-a*s,A=i*u-a*l,M=c*y-h*d,S=c*m-p*d,P=c*g-f*d,I=h*m-p*y,E=h*g-f*y,C=p*g-f*m,D=x*C-v*E+b*I+w*P-_*S+A*M;return D?(t[0]=(s*C-l*E+u*I)*(D=1/D),t[1]=(l*P-o*C-u*S)*D,t[2]=(o*E-s*P+u*M)*D,t[3]=(i*E-n*C-a*I)*D,t[4]=(r*C-i*P+a*S)*D,t[5]=(n*P-r*E-a*M)*D,t[6]=(y*A-m*_+g*w)*D,t[7]=(m*b-d*A-g*v)*D,t[8]=(d*_-y*b+g*x)*D,t):null},v.projection=function(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},v.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},v.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},v.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},v.subtract=M,v.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},v.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},v.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},v.equals=function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=e[0],p=e[1],f=e[2],d=e[3],y=e[4],m=e[5],g=e[6],x=e[7],v=e[8];return Math.abs(r-h)<=w.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-p)<=w.EPSILON*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(i-f)<=w.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-d)<=w.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-y)<=w.EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(s-m)<=w.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-g)<=w.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-x)<=w.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(c-v)<=w.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))},v.sub=v.mul=void 0;var w=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==b(t)&&"function"!=typeof t)return{default:t};var r=_(void 0);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}(r);function _(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(_=function(t){return t?r:e})(t)}function A(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=r[0],f=r[1],d=r[2],y=r[3],m=r[4],g=r[5],x=r[6],v=r[7],b=r[8];return t[0]=p*n+f*o+d*u,t[1]=p*i+f*s+d*c,t[2]=p*a+f*l+d*h,t[3]=y*n+m*o+g*u,t[4]=y*i+m*s+g*c,t[5]=y*a+m*l+g*h,t[6]=x*n+v*o+b*u,t[7]=x*i+v*s+b*c,t[8]=x*a+v*l+b*h,t}function M(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}v.mul=A,v.sub=M;var S={};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}Object.defineProperty(S,"__esModule",{value:!0}),S.create=function(){var t=new I.ARRAY_TYPE(16);return I.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},S.clone=function(t){var e=new I.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},S.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},S.fromValues=function(t,e,r,n,i,a,o,s,l,u,c,h,p,f,d,y){var m=new I.ARRAY_TYPE(16);return m[0]=t,m[1]=e,m[2]=r,m[3]=n,m[4]=i,m[5]=a,m[6]=o,m[7]=s,m[8]=l,m[9]=u,m[10]=c,m[11]=h,m[12]=p,m[13]=f,m[14]=d,m[15]=y,m},S.set=function(t,e,r,n,i,a,o,s,l,u,c,h,p,f,d,y,m){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t[8]=u,t[9]=c,t[10]=h,t[11]=p,t[12]=f,t[13]=d,t[14]=y,t[15]=m,t},S.identity=C,S.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},S.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],y=e[13],m=e[14],g=e[15],x=r*s-n*o,v=r*l-i*o,b=r*u-a*o,w=n*l-i*s,_=n*u-a*s,A=i*u-a*l,M=c*y-h*d,S=c*m-p*d,P=c*g-f*d,I=h*m-p*y,E=h*g-f*y,C=p*g-f*m,D=x*C-v*E+b*I+w*P-_*S+A*M;return D?(t[0]=(s*C-l*E+u*I)*(D=1/D),t[1]=(i*E-n*C-a*I)*D,t[2]=(y*A-m*_+g*w)*D,t[3]=(p*_-h*A-f*w)*D,t[4]=(l*P-o*C-u*S)*D,t[5]=(r*C-i*P+a*S)*D,t[6]=(m*b-d*A-g*v)*D,t[7]=(c*A-p*b+f*v)*D,t[8]=(o*E-s*P+u*M)*D,t[9]=(n*P-r*E-a*M)*D,t[10]=(d*_-y*b+g*x)*D,t[11]=(h*b-c*_-f*x)*D,t[12]=(s*S-o*I-l*M)*D,t[13]=(r*I-n*S+i*M)*D,t[14]=(y*v-d*w-m*x)*D,t[15]=(c*w-h*v+p*x)*D,t):null},S.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],y=e[13],m=e[14],g=e[15];return t[0]=s*(p*g-f*m)-h*(l*g-u*m)+y*(l*f-u*p),t[1]=-(n*(p*g-f*m)-h*(i*g-a*m)+y*(i*f-a*p)),t[2]=n*(l*g-u*m)-s*(i*g-a*m)+y*(i*u-a*l),t[3]=-(n*(l*f-u*p)-s*(i*f-a*p)+h*(i*u-a*l)),t[4]=-(o*(p*g-f*m)-c*(l*g-u*m)+d*(l*f-u*p)),t[5]=r*(p*g-f*m)-c*(i*g-a*m)+d*(i*f-a*p),t[6]=-(r*(l*g-u*m)-o*(i*g-a*m)+d*(i*u-a*l)),t[7]=r*(l*f-u*p)-o*(i*f-a*p)+c*(i*u-a*l),t[8]=o*(h*g-f*y)-c*(s*g-u*y)+d*(s*f-u*h),t[9]=-(r*(h*g-f*y)-c*(n*g-a*y)+d*(n*f-a*h)),t[10]=r*(s*g-u*y)-o*(n*g-a*y)+d*(n*u-a*s),t[11]=-(r*(s*f-u*h)-o*(n*f-a*h)+c*(n*u-a*s)),t[12]=-(o*(h*m-p*y)-c*(s*m-l*y)+d*(s*p-l*h)),t[13]=r*(h*m-p*y)-c*(n*m-i*y)+d*(n*p-i*h),t[14]=-(r*(s*m-l*y)-o*(n*m-i*y)+d*(n*l-i*s)),t[15]=r*(s*p-l*h)-o*(n*p-i*h)+c*(n*l-i*s),t},S.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],p=t[11],f=t[12],d=t[13],y=t[14],m=t[15];return(e*o-r*a)*(h*m-p*y)-(e*s-n*a)*(c*m-p*d)+(e*l-i*a)*(c*y-h*d)+(r*s-n*o)*(u*m-p*f)-(r*l-i*o)*(u*y-h*f)+(n*l-i*s)*(u*d-c*f)},S.multiply=D,S.translate=function(t,e,r){var n,i,a,o,s,l,u,c,h,p,f,d,y=r[0],m=r[1],g=r[2];return e===t?(t[12]=e[0]*y+e[4]*m+e[8]*g+e[12],t[13]=e[1]*y+e[5]*m+e[9]*g+e[13],t[14]=e[2]*y+e[6]*m+e[10]*g+e[14],t[15]=e[3]*y+e[7]*m+e[11]*g+e[15]):(i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=n=e[0],t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=n*y+s*m+h*g+e[12],t[13]=i*y+l*m+p*g+e[13],t[14]=a*y+u*m+f*g+e[14],t[15]=o*y+c*m+d*g+e[15]),t},S.scale=function(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},S.rotate=function(t,e,r,n){var i,a,o,s,l,u,c,h,p,f,d,y,m,g,x,v,b,w,_,A,M,S,P,E,C=n[0],D=n[1],k=n[2],T=Math.hypot(C,D,k);return T<I.EPSILON?null:(C*=T=1/T,D*=T,k*=T,i=Math.sin(r),a=Math.cos(r),l=e[1],u=e[2],c=e[3],p=e[5],f=e[6],d=e[7],m=e[9],g=e[10],x=e[11],v=C*C*(o=1-a)+a,_=C*D*o-k*i,A=D*D*o+a,M=k*D*o+C*i,S=C*k*o+D*i,P=D*k*o-C*i,E=k*k*o+a,t[0]=(s=e[0])*v+(h=e[4])*(b=D*C*o+k*i)+(y=e[8])*(w=k*C*o-D*i),t[1]=l*v+p*b+m*w,t[2]=u*v+f*b+g*w,t[3]=c*v+d*b+x*w,t[4]=s*_+h*A+y*M,t[5]=l*_+p*A+m*M,t[6]=u*_+f*A+g*M,t[7]=c*_+d*A+x*M,t[8]=s*S+h*P+y*E,t[9]=l*S+p*P+m*E,t[10]=u*S+f*P+g*E,t[11]=c*S+d*P+x*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},S.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+u*n,t[5]=o*i+c*n,t[6]=s*i+h*n,t[7]=l*i+p*n,t[8]=u*i-a*n,t[9]=c*i-o*n,t[10]=h*i-s*n,t[11]=p*i-l*n,t},S.rotateY=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-u*n,t[1]=o*i-c*n,t[2]=s*i-h*n,t[3]=l*i-p*n,t[8]=a*n+u*i,t[9]=o*n+c*i,t[10]=s*n+h*i,t[11]=l*n+p*i,t},S.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+u*n,t[1]=o*i+c*n,t[2]=s*i+h*n,t[3]=l*i+p*n,t[4]=u*i-a*n,t[5]=c*i-o*n,t[6]=h*i-s*n,t[7]=p*i-l*n,t},S.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},S.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},S.fromRotation=function(t,e,r){var n,i,a,o=r[0],s=r[1],l=r[2],u=Math.hypot(o,s,l);return u<I.EPSILON?null:(o*=u=1/u,s*=u,l*=u,n=Math.sin(e),i=Math.cos(e),t[0]=o*o*(a=1-i)+i,t[1]=s*o*a+l*n,t[2]=l*o*a-s*n,t[3]=0,t[4]=o*s*a-l*n,t[5]=s*s*a+i,t[6]=l*s*a+o*n,t[7]=0,t[8]=o*l*a+s*n,t[9]=s*l*a-o*n,t[10]=l*l*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},S.fromXRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},S.fromYRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},S.fromZRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},S.fromRotationTranslation=k,S.fromQuat2=function(t,e){var r=new I.ARRAY_TYPE(3),n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=n*n+i*i+a*a+o*o;return h>0?(r[0]=2*(s*o+c*n+l*a-u*i)/h,r[1]=2*(l*o+c*i+u*n-s*a)/h,r[2]=2*(u*o+c*a+s*i-l*n)/h):(r[0]=2*(s*o+c*n+l*a-u*i),r[1]=2*(l*o+c*i+u*n-s*a),r[2]=2*(u*o+c*a+s*i-l*n)),k(t,e,r),t},S.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},S.getScaling=T,S.getRotation=function(t,e){var r=new I.ARRAY_TYPE(3);T(r,e);var n=1/r[0],i=1/r[1],a=1/r[2],o=e[0]*n,s=e[1]*i,l=e[2]*a,u=e[4]*n,c=e[5]*i,h=e[6]*a,p=e[8]*n,f=e[9]*i,d=e[10]*a,y=o+c+d,m=0;return y>0?(m=2*Math.sqrt(y+1),t[3]=.25*m,t[0]=(h-f)/m,t[1]=(p-l)/m,t[2]=(s-u)/m):o>c&&o>d?(m=2*Math.sqrt(1+o-c-d),t[3]=(h-f)/m,t[0]=.25*m,t[1]=(s+u)/m,t[2]=(p+l)/m):c>d?(m=2*Math.sqrt(1+c-o-d),t[3]=(p-l)/m,t[0]=(s+u)/m,t[1]=.25*m,t[2]=(h+f)/m):(m=2*Math.sqrt(1+d-o-c),t[3]=(s-u)/m,t[0]=(p+l)/m,t[1]=(h+f)/m,t[2]=.25*m),t},S.fromRotationTranslationScale=function(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=i+i,u=a+a,c=o+o,h=i*l,p=i*u,f=i*c,d=a*u,y=a*c,m=o*c,g=s*l,x=s*u,v=s*c,b=n[0],w=n[1],_=n[2];return t[0]=(1-(d+m))*b,t[1]=(p+v)*b,t[2]=(f-x)*b,t[3]=0,t[4]=(p-v)*w,t[5]=(1-(h+m))*w,t[6]=(y+g)*w,t[7]=0,t[8]=(f+x)*_,t[9]=(y-g)*_,t[10]=(1-(h+d))*_,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},S.fromRotationTranslationScaleOrigin=function(t,e,r,n,i){var a=e[0],o=e[1],s=e[2],l=e[3],u=a+a,c=o+o,h=s+s,p=a*u,f=a*c,d=a*h,y=o*c,m=o*h,g=s*h,x=l*u,v=l*c,b=l*h,w=n[0],_=n[1],A=n[2],M=i[0],S=i[1],P=i[2],I=(1-(y+g))*w,E=(f+b)*w,C=(d-v)*w,D=(f-b)*_,k=(1-(p+g))*_,T=(m+x)*_,L=(d+v)*A,B=(m-x)*A,z=(1-(p+y))*A;return t[0]=I,t[1]=E,t[2]=C,t[3]=0,t[4]=D,t[5]=k,t[6]=T,t[7]=0,t[8]=L,t[9]=B,t[10]=z,t[11]=0,t[12]=r[0]+M-(I*M+D*S+L*P),t[13]=r[1]+S-(E*M+k*S+B*P),t[14]=r[2]+P-(C*M+T*S+z*P),t[15]=1,t},S.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,h=n*s,p=i*o,f=i*s,d=i*l,y=a*o,m=a*s,g=a*l;return t[0]=1-h-d,t[1]=c+g,t[2]=p-m,t[3]=0,t[4]=c-g,t[5]=1-u-d,t[6]=f+y,t[7]=0,t[8]=p+m,t[9]=f-y,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},S.frustum=function(t,e,r,n,i,a,o){var s=1/(r-e),l=1/(i-n),u=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*l,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*l,t[10]=(o+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*u,t[15]=0,t},S.perspectiveNO=L,S.perspectiveZO=function(t,e,r,n,i){var a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=i*(a=1/(n-i)),t[14]=i*n*a):(t[10]=-1,t[14]=-n),t},S.perspectiveFromFieldOfView=function(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(i+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(o-s)*l*.5,t[9]=(i-a)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},S.orthoNO=B,S.orthoZO=function(t,e,r,n,i,a,o){var s=1/(e-r),l=1/(n-i),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=u,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=a*u,t[15]=1,t},S.lookAt=function(t,e,r,n){var i,a,o,s,l,u,c,h,p,f,d=e[0],y=e[1],m=e[2],g=n[0],x=n[1],v=n[2],b=r[0],w=r[1],_=r[2];return Math.abs(d-b)<I.EPSILON&&Math.abs(y-w)<I.EPSILON&&Math.abs(m-_)<I.EPSILON?C(t):(c=d-b,h=y-w,p=m-_,i=x*(p*=f=1/Math.hypot(c,h,p))-v*(h*=f),a=v*(c*=f)-g*p,o=g*h-x*c,(f=Math.hypot(i,a,o))?(i*=f=1/f,a*=f,o*=f):(i=0,a=0,o=0),s=h*o-p*a,l=p*i-c*o,u=c*a-h*i,(f=Math.hypot(s,l,u))?(s*=f=1/f,l*=f,u*=f):(s=0,l=0,u=0),t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=a,t[5]=l,t[6]=h,t[7]=0,t[8]=o,t[9]=u,t[10]=p,t[11]=0,t[12]=-(i*d+a*y+o*m),t[13]=-(s*d+l*y+u*m),t[14]=-(c*d+h*y+p*m),t[15]=1,t)},S.targetTo=function(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=n[0],l=n[1],u=n[2],c=i-r[0],h=a-r[1],p=o-r[2],f=c*c+h*h+p*p;f>0&&(c*=f=1/Math.sqrt(f),h*=f,p*=f);var d=l*p-u*h,y=u*c-s*p,m=s*h-l*c;return(f=d*d+y*y+m*m)>0&&(d*=f=1/Math.sqrt(f),y*=f,m*=f),t[0]=d,t[1]=y,t[2]=m,t[3]=0,t[4]=h*m-p*y,t[5]=p*d-c*m,t[6]=c*y-h*d,t[7]=0,t[8]=c,t[9]=h,t[10]=p,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t},S.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},S.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},S.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},S.subtract=z,S.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},S.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},S.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},S.equals=function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],p=t[10],f=t[11],d=t[12],y=t[13],m=t[14],g=t[15],x=e[0],v=e[1],b=e[2],w=e[3],_=e[4],A=e[5],M=e[6],S=e[7],P=e[8],E=e[9],C=e[10],D=e[11],k=e[12],T=e[13],L=e[14],B=e[15];return Math.abs(r-x)<=I.EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(n-v)<=I.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(i-b)<=I.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-w)<=I.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-_)<=I.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(s-A)<=I.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(l-M)<=I.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-S)<=I.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-P)<=I.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(h-E)<=I.EPSILON*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(p-C)<=I.EPSILON*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(f-D)<=I.EPSILON*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(d-k)<=I.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(y-T)<=I.EPSILON*Math.max(1,Math.abs(y),Math.abs(T))&&Math.abs(m-L)<=I.EPSILON*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(g-B)<=I.EPSILON*Math.max(1,Math.abs(g),Math.abs(B))},S.sub=S.mul=S.ortho=S.perspective=void 0;var I=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==P(t)&&"function"!=typeof t)return{default:t};var r=E(void 0);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}(r);function E(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(E=function(t){return t?r:e})(t)}function C(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function D(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],y=e[12],m=e[13],g=e[14],x=e[15],v=r[0],b=r[1],w=r[2],_=r[3];return t[0]=v*n+b*s+w*h+_*y,t[1]=v*i+b*l+w*p+_*m,t[2]=v*a+b*u+w*f+_*g,t[3]=v*o+b*c+w*d+_*x,t[4]=(v=r[4])*n+(b=r[5])*s+(w=r[6])*h+(_=r[7])*y,t[5]=v*i+b*l+w*p+_*m,t[6]=v*a+b*u+w*f+_*g,t[7]=v*o+b*c+w*d+_*x,t[8]=(v=r[8])*n+(b=r[9])*s+(w=r[10])*h+(_=r[11])*y,t[9]=v*i+b*l+w*p+_*m,t[10]=v*a+b*u+w*f+_*g,t[11]=v*o+b*c+w*d+_*x,t[12]=(v=r[12])*n+(b=r[13])*s+(w=r[14])*h+(_=r[15])*y,t[13]=v*i+b*l+w*p+_*m,t[14]=v*a+b*u+w*f+_*g,t[15]=v*o+b*c+w*d+_*x,t}function k(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,l=i+i,u=a+a,c=n*s,h=n*l,p=n*u,f=i*l,d=i*u,y=a*u,m=o*s,g=o*l,x=o*u;return t[0]=1-(f+y),t[1]=h+x,t[2]=p-g,t[3]=0,t[4]=h-x,t[5]=1-(c+y),t[6]=d+m,t[7]=0,t[8]=p+g,t[9]=d-m,t[10]=1-(c+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function T(t,e){var r=e[4],n=e[5],i=e[6],a=e[8],o=e[9],s=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(r,n,i),t[2]=Math.hypot(a,o,s),t}function L(t,e,r,n,i){var a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+n)*(a=1/(n-i)),t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t}function B(t,e,r,n,i,a,o){var s=1/(e-r),l=1/(n-i),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=(o+a)*u,t[15]=1,t}function z(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}S.perspective=L,S.ortho=B,S.mul=D,S.sub=z;var R={},V={};function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}Object.defineProperty(V,"__esModule",{value:!0}),V.create=N,V.clone=function(t){var e=new O.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},V.length=U,V.fromValues=function(t,e,r){var n=new O.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n},V.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},V.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},V.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},V.subtract=q,V.multiply=$,V.divide=G,V.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},V.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},V.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},V.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},V.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},V.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},V.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},V.distance=Y,V.squaredDistance=X,V.squaredLength=Z,V.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},V.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},V.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t},V.dot=W,V.cross=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2];return t[0]=i*l-a*s,t[1]=a*o-n*l,t[2]=n*s-i*o,t},V.lerp=function(t,e,r,n){var i=e[0],a=e[1],o=e[2];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t},V.hermite=function(t,e,r,n,i,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,u=o*(a-1),c=o*(3-2*a);return t[0]=e[0]*s+r[0]*l+n[0]*u+i[0]*c,t[1]=e[1]*s+r[1]*l+n[1]*u+i[1]*c,t[2]=e[2]*s+r[2]*l+n[2]*u+i[2]*c,t},V.bezier=function(t,e,r,n,i,a){var o=1-a,s=o*o,l=a*a,u=s*o,c=3*a*s,h=3*l*o,p=l*a;return t[0]=e[0]*u+r[0]*c+n[0]*h+i[0]*p,t[1]=e[1]*u+r[1]*c+n[1]*h+i[1]*p,t[2]=e[2]*u+r[2]*c+n[2]*h+i[2]*p,t},V.random=function(t,e){e=e||1;var r=2*O.RANDOM()*Math.PI,n=2*O.RANDOM()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t},V.transformMat4=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return t[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/(o=o||1),t[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,t},V.transformMat3=function(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t},V.transformQuat=function(t,e,r){var n=r[0],i=r[1],a=r[2],o=e[0],s=e[1],l=e[2],u=r[3],c=u*n+s*a-l*i,h=u*i+l*n-o*a,p=u*a+o*i-s*n,f=-o*n-s*i-l*a;return t[0]=o+(u*=y)+(p*=2),t[1]=s+c+f,t[2]=l+h+d,t},V.rotateX=function(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},V.rotateY=function(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},V.rotateZ=function(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},V.angle=function(t,e){var r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],s=e[2],l=Math.sqrt(r*r+n*n+i*i)*Math.sqrt(a*a+o*o+s*s),u=l&&W(t,e)/l;return Math.acos(Math.min(Math.max(u,-1),1))},V.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t},V.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},V.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},V.equals=function(t,e){var r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(r-a)<=O.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=O.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=O.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))},V.forEach=V.sqrLen=V.len=V.sqrDist=V.dist=V.div=V.mul=V.sub=void 0;var O=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==F(t)&&"function"!=typeof t)return{default:t};var r=j(void 0);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}(r);function j(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(j=function(t){return t?r:e})(t)}function N(){var t=new O.ARRAY_TYPE(3);return O.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function U(t){return Math.hypot(t[0],t[1],t[2])}function q(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function $(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function G(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function Y(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])}function X(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function Z(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function W(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}V.sub=q,V.mul=$,V.div=G,V.dist=Y,V.sqrDist=X,V.len=U,V.sqrLen=Z;var J,K=(J=N(),function(t,e,r,n,i,a){var o,s;for(e||(e=3),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,o=r;o<s;o+=e)J[0]=t[o],J[1]=t[o+1],J[2]=t[o+2],i(J,J,a),t[o]=J[0],t[o+1]=J[1],t[o+2]=J[2];return t});V.forEach=K;var H={};function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}Object.defineProperty(H,"__esModule",{value:!0}),H.create=rt,H.clone=function(t){var e=new tt.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},H.fromValues=function(t,e,r,n){var i=new tt.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i},H.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},H.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},H.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},H.subtract=nt,H.multiply=it,H.divide=at,H.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},H.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},H.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},H.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},H.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},H.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},H.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},H.distance=ot,H.squaredDistance=st,H.length=lt,H.squaredLength=ut,H.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},H.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},H.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=a*o,t},H.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},H.cross=function(t,e,r,n){var i=r[0]*n[1]-r[1]*n[0],a=r[0]*n[2]-r[2]*n[0],o=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],l=r[1]*n[3]-r[3]*n[1],u=r[2]*n[3]-r[3]*n[2],c=e[0],h=e[1],p=e[2],f=e[3];return t[0]=h*u-p*l+f*s,t[1]=-c*u+p*o-f*a,t[2]=c*l-h*o+f*i,t[3]=-c*s+h*a-p*i,t},H.lerp=function(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t[3]=s+n*(r[3]-s),t},H.random=function(t,e){var r,n,i,a,o,s;e=e||1;do{o=(r=2*tt.RANDOM()-1)*r+(n=2*tt.RANDOM()-1)*n}while(o>=1);do{s=(i=2*tt.RANDOM()-1)*i+(a=2*tt.RANDOM()-1)*a}while(s>=1);var l=Math.sqrt((1-o)/s);return t[0]=e*r,t[1]=e*n,t[2]=e*i*l,t[3]=e*a*l,t},H.transformMat4=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t},H.transformQuat=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*a-l*i,h=u*i+l*n-o*a,p=u*a+o*i-s*n,f=-o*n-s*i-l*a;return t[0]=c*u+f*-o+h*-l-p*-s,t[1]=h*u+f*-s+p*-o-c*-l,t[2]=p*u+f*-l+c*-s-h*-o,t[3]=e[3],t},H.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},H.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},H.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},H.equals=function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(r-o)<=tt.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=tt.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=tt.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=tt.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))},H.forEach=H.sqrLen=H.len=H.sqrDist=H.dist=H.div=H.mul=H.sub=void 0;var tt=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==Q(t)&&"function"!=typeof t)return{default:t};var r=et(void 0);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}(r);function et(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(et=function(t){return t?r:e})(t)}function rt(){var t=new tt.ARRAY_TYPE(4);return tt.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function nt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function it(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function at(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function ot(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3])}function st(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return r*r+n*n+i*i+a*a}function lt(t){return Math.hypot(t[0],t[1],t[2],t[3])}function ut(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}H.sub=nt,H.mul=it,H.div=at,H.dist=ot,H.sqrDist=st,H.len=lt,H.sqrLen=ut;var ct=function(){var t=rt();return function(e,r,n,i,a,o){var s,l;for(r||(r=4),n||(n=0),l=i?Math.min(i*r+n,e.length):e.length,s=n;s<l;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}H.forEach=ct,Object.defineProperty(R,"__esModule",{value:!0}),R.create=xt,R.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},R.setAxisAngle=vt,R.getAxisAngle=function(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>pt.EPSILON?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},R.getAngle=function(t,e){var r=It(t,e);return Math.acos(2*r*r-1)},R.multiply=bt,R.rotateX=function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+o*s,t[1]=i*l+a*s,t[2]=a*l-i*s,t[3]=o*l-n*s,t},R.rotateY=function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l-a*s,t[1]=i*l+o*s,t[2]=a*l+n*s,t[3]=o*l-i*s,t},R.rotateZ=function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*s,t[1]=i*l-n*s,t[2]=a*l+o*s,t[3]=o*l-a*s,t},R.calculateW=function(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t},R.exp=wt,R.ln=_t,R.pow=function(t,e,r){return _t(t,e),Pt(t,t,r),wt(t,t),t},R.slerp=Mt,R.random=function(t){var e=pt.RANDOM(),r=pt.RANDOM(),n=pt.RANDOM(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=a*Math.sin(2*Math.PI*n),t[3]=a*Math.cos(2*Math.PI*n),t},R.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a,s=o?1/o:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=a*s,t},R.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},R.fromMat3=St,R.fromEuler=function(t,e,r,n){var i=.5*Math.PI/180;e*=i,r*=i,n*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(r),l=Math.cos(r),u=Math.sin(n),c=Math.cos(n);return t[0]=a*l*c-o*s*u,t[1]=o*s*c+a*l*u,t[2]=o*l*u-a*s*c,t[3]=o*l*c+a*s*u,t},R.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},R.setAxes=R.sqlerp=R.rotationTo=R.equals=R.exactEquals=R.normalize=R.sqrLen=R.squaredLength=R.len=R.length=R.lerp=R.dot=R.scale=R.mul=R.add=R.set=R.copy=R.fromValues=R.clone=void 0;var pt=gt(r),ft=gt(v),dt=gt(V),yt=gt(H);function mt(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(mt=function(t){return t?r:e})(t)}function gt(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==ht(t)&&"function"!=typeof t)return{default:t};var r=mt(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function xt(){var t=new pt.ARRAY_TYPE(4);return pt.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function vt(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function bt(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*c+o*s+i*u-a*l,t[1]=i*c+o*l+a*s-n*u,t[2]=a*c+o*u+n*l-i*s,t[3]=o*c-n*s-i*l-a*u,t}function wt(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=Math.sqrt(r*r+n*n+i*i),s=Math.exp(a),l=o>0?s*Math.sin(o)/o:0;return t[0]=r*l,t[1]=n*l,t[2]=i*l,t[3]=s*Math.cos(o),t}function _t(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=Math.sqrt(r*r+n*n+i*i),s=o>0?Math.atan2(o,a)/o:0;return t[0]=r*s,t[1]=n*s,t[2]=i*s,t[3]=.5*Math.log(r*r+n*n+i*i+a*a),t}function Mt(t,e,r,n){var i,a,o,s,l,u=e[0],c=e[1],h=e[2],p=e[3],f=r[0],d=r[1],y=r[2],m=r[3];return(a=u*f+c*d+h*y+p*m)<0&&(a=-a,f=-f,d=-d,y=-y,m=-m),1-a>pt.EPSILON?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,l=Math.sin(n*i)/o):(s=1-n,l=n),t[0]=s*u+l*f,t[1]=s*c+l*d,t[2]=s*h+l*y,t[3]=s*p+l*m,t}function St(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,t[0]=(e[5]-e[7])*(r=.5/r),t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*o+o]+1),t[i]=.5*r,t[3]=(e[3*a+o]-e[3*o+a])*(r=.5/r),t[a]=(e[3*a+i]+e[3*i+a])*r,t[o]=(e[3*o+i]+e[3*i+o])*r}return t}R.clone=yt.clone,R.fromValues=yt.fromValues,R.copy=yt.copy,R.set=yt.set,R.add=yt.add,R.mul=bt;var Pt=yt.scale;R.scale=Pt;var It=yt.dot;R.dot=It,R.lerp=yt.lerp;var Et=yt.length;R.length=Et,R.len=Et;var Ct=yt.squaredLength;R.squaredLength=Ct,R.sqrLen=Ct;var Dt=yt.normalize;R.normalize=Dt,R.exactEquals=yt.exactEquals,R.equals=yt.equals;var kt,Tt,Lt,Bt=(kt=dt.create(),Tt=dt.fromValues(1,0,0),Lt=dt.fromValues(0,1,0),function(t,e,r){var n=dt.dot(e,r);return n<-.999999?(dt.cross(kt,Tt,e),dt.len(kt)<1e-6&&dt.cross(kt,Lt,e),dt.normalize(kt,kt),vt(t,kt,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(dt.cross(kt,e,r),t[0]=kt[0],t[1]=kt[1],t[2]=kt[2],t[3]=1+n,Dt(t,t))});R.rotationTo=Bt;var zt,Rt,Vt=(zt=xt(),Rt=xt(),function(t,e,r,n,i,a){return Mt(zt,e,i,a),Mt(Rt,r,n,a),Mt(t,zt,Rt,2*a*(1-a)),t});R.sqlerp=Vt;var Ft,Ot=(Ft=ft.create(),function(t,e,r,n){return Ft[0]=r[0],Ft[3]=r[1],Ft[6]=r[2],Ft[1]=n[0],Ft[4]=n[1],Ft[7]=n[2],Ft[2]=-e[0],Ft[5]=-e[1],Ft[8]=-e[2],Dt(t,St(t,Ft))});R.setAxes=Ot;var jt={};function Nt(t){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(t)}Object.defineProperty(jt,"__esModule",{value:!0}),jt.create=function(){var t=new Ut.ARRAY_TYPE(8);return Ut.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},jt.clone=function(t){var e=new Ut.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},jt.fromValues=function(t,e,r,n,i,a,o,s){var l=new Ut.ARRAY_TYPE(8);return l[0]=t,l[1]=e,l[2]=r,l[3]=n,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l},jt.fromRotationTranslationValues=function(t,e,r,n,i,a,o){var s=new Ut.ARRAY_TYPE(8);s[0]=t,s[1]=e,s[2]=r,s[3]=n;var l=.5*i,u=.5*a,c=.5*o;return s[4]=l*n+u*r-c*e,s[5]=u*n+c*t-l*r,s[6]=c*n+l*e-u*t,s[7]=-l*t-u*e-c*r,s},jt.fromRotationTranslation=Xt,jt.fromTranslation=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},jt.fromRotation=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},jt.fromMat4=function(t,e){var r=qt.create();$t.getRotation(r,e);var n=new Ut.ARRAY_TYPE(3);return $t.getTranslation(n,e),Xt(t,r,n),t},jt.copy=Zt,jt.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},jt.set=function(t,e,r,n,i,a,o,s,l){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t},jt.getDual=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},jt.setDual=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},jt.getTranslation=function(t,e){var r=e[4],n=e[5],i=e[6],a=e[7],o=-e[0],s=-e[1],l=-e[2],u=e[3];return t[0]=2*(r*u+a*o+n*l-i*s),t[1]=2*(n*u+a*s+i*o-r*l),t[2]=2*(i*u+a*l+r*s-n*o),t},jt.translate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=.5*r[0],l=.5*r[1],u=.5*r[2],c=e[4],h=e[5],p=e[6],f=e[7];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=o*s+i*u-a*l+c,t[5]=o*l+a*s-n*u+h,t[6]=o*u+n*l-i*s+p,t[7]=-n*s-i*l-a*u+f,t},jt.rotateX=function(t,e,r){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=s*o+c*n+l*a-u*i,p=l*o+c*i+u*n-s*a,f=u*o+c*a+s*i-l*n,d=c*o-s*n-l*i-u*a;return qt.rotateX(t,e,r),t[4]=h*(o=t[3])+d*(n=t[0])+p*(a=t[2])-f*(i=t[1]),t[5]=p*o+d*i+f*n-h*a,t[6]=f*o+d*a+h*i-p*n,t[7]=d*o-h*n-p*i-f*a,t},jt.rotateY=function(t,e,r){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=s*o+c*n+l*a-u*i,p=l*o+c*i+u*n-s*a,f=u*o+c*a+s*i-l*n,d=c*o-s*n-l*i-u*a;return qt.rotateY(t,e,r),t[4]=h*(o=t[3])+d*(n=t[0])+p*(a=t[2])-f*(i=t[1]),t[5]=p*o+d*i+f*n-h*a,t[6]=f*o+d*a+h*i-p*n,t[7]=d*o-h*n-p*i-f*a,t},jt.rotateZ=function(t,e,r){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=s*o+c*n+l*a-u*i,p=l*o+c*i+u*n-s*a,f=u*o+c*a+s*i-l*n,d=c*o-s*n-l*i-u*a;return qt.rotateZ(t,e,r),t[4]=h*(o=t[3])+d*(n=t[0])+p*(a=t[2])-f*(i=t[1]),t[5]=p*o+d*i+f*n-h*a,t[6]=f*o+d*a+h*i-p*n,t[7]=d*o-h*n-p*i-f*a,t},jt.rotateByQuatAppend=function(t,e,r){var n=r[0],i=r[1],a=r[2],o=r[3],s=e[0],l=e[1],u=e[2],c=e[3];return t[0]=s*o+c*n+l*a-u*i,t[1]=l*o+c*i+u*n-s*a,t[2]=u*o+c*a+s*i-l*n,t[3]=c*o-s*n-l*i-u*a,t[4]=(s=e[4])*o+(c=e[7])*n+(l=e[5])*a-(u=e[6])*i,t[5]=l*o+c*i+u*n-s*a,t[6]=u*o+c*a+s*i-l*n,t[7]=c*o-s*n-l*i-u*a,t},jt.rotateByQuatPrepend=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*c+o*s+i*u-a*l,t[1]=i*c+o*l+a*s-n*u,t[2]=a*c+o*u+n*l-i*s,t[3]=o*c-n*s-i*l-a*u,t[4]=n*(c=r[7])+o*(s=r[4])+i*(u=r[6])-a*(l=r[5]),t[5]=i*c+o*l+a*s-n*u,t[6]=a*c+o*u+n*l-i*s,t[7]=o*c-n*s-i*l-a*u,t},jt.rotateAroundAxis=function(t,e,r,n){if(Math.abs(n)<Ut.EPSILON)return Zt(t,e);var i=Math.hypot(r[0],r[1],r[2]);n*=.5;var a=Math.sin(n),o=a*r[0]/i,s=a*r[1]/i,l=a*r[2]/i,u=Math.cos(n),c=e[0],h=e[1],p=e[2],f=e[3];t[0]=c*u+f*o+h*l-p*s,t[1]=h*u+f*s+p*o-c*l,t[2]=p*u+f*l+c*s-h*o,t[3]=f*u-c*o-h*s-p*l;var d=e[4],y=e[5],m=e[6],g=e[7];return t[4]=d*u+g*o+y*l-m*s,t[5]=y*u+g*s+m*o-d*l,t[6]=m*u+g*l+d*s-y*o,t[7]=g*u-d*o-y*s-m*l,t},jt.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t},jt.multiply=Wt,jt.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t},jt.lerp=function(t,e,r,n){var i=1-n;return Jt(e,r)<0&&(n=-n),t[0]=e[0]*i+r[0]*n,t[1]=e[1]*i+r[1]*n,t[2]=e[2]*i+r[2]*n,t[3]=e[3]*i+r[3]*n,t[4]=e[4]*i+r[4]*n,t[5]=e[5]*i+r[5]*n,t[6]=e[6]*i+r[6]*n,t[7]=e[7]*i+r[7]*n,t},jt.invert=function(t,e){var r=Ht(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t},jt.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},jt.normalize=function(t,e){var r=Ht(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,i=e[1]/r,a=e[2]/r,o=e[3]/r,s=e[4],l=e[5],u=e[6],c=e[7],h=n*s+i*l+a*u+o*c;t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=(s-n*h)/r,t[5]=(l-i*h)/r,t[6]=(u-a*h)/r,t[7]=(c-o*h)/r}return t},jt.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},jt.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},jt.equals=function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=e[0],h=e[1],p=e[2],f=e[3],d=e[4],y=e[5],m=e[6],g=e[7];return Math.abs(r-c)<=Ut.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-h)<=Ut.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-p)<=Ut.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-f)<=Ut.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-d)<=Ut.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-y)<=Ut.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(l-m)<=Ut.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-g)<=Ut.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))},jt.sqrLen=jt.squaredLength=jt.len=jt.length=jt.dot=jt.mul=jt.setReal=jt.getReal=void 0;var Ut=Yt(r),qt=Yt(R),$t=Yt(S);function Gt(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(Gt=function(t){return t?r:e})(t)}function Yt(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==Nt(t)&&"function"!=typeof t)return{default:t};var r=Gt(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function Xt(t,e,r){var n=.5*r[0],i=.5*r[1],a=.5*r[2],o=e[0],s=e[1],l=e[2],u=e[3];return t[0]=o,t[1]=s,t[2]=l,t[3]=u,t[4]=n*u+i*l-a*s,t[5]=i*u+a*o-n*l,t[6]=a*u+n*s-i*o,t[7]=-n*o-i*s-a*l,t}function Zt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Wt(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[4],l=r[5],u=r[6],c=r[7],h=e[4],p=e[5],f=e[6],d=e[7],y=r[0],m=r[1],g=r[2],x=r[3];return t[0]=n*x+o*y+i*g-a*m,t[1]=i*x+o*m+a*y-n*g,t[2]=a*x+o*g+n*m-i*y,t[3]=o*x-n*y-i*m-a*g,t[4]=n*c+o*s+i*u-a*l+h*x+d*y+p*g-f*m,t[5]=i*c+o*l+a*s-n*u+p*x+d*m+f*y-h*g,t[6]=a*c+o*u+n*l-i*s+f*x+d*g+h*m-p*y,t[7]=o*c-n*s-i*l-a*u+d*x-h*y-p*m-f*g,t}jt.getReal=qt.copy,jt.setReal=qt.copy,jt.mul=Wt;var Jt=qt.dot;jt.dot=Jt;var Kt=qt.length;jt.length=Kt,jt.len=Kt;var Ht=qt.squaredLength;jt.squaredLength=Ht,jt.sqrLen=Ht;var Qt={};function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.create=ne,Qt.clone=function(t){var e=new ee.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},Qt.fromValues=function(t,e){var r=new ee.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},Qt.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},Qt.set=function(t,e,r){return t[0]=e,t[1]=r,t},Qt.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},Qt.subtract=ie,Qt.multiply=ae,Qt.divide=oe,Qt.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},Qt.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},Qt.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},Qt.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},Qt.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},Qt.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},Qt.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},Qt.distance=se,Qt.squaredDistance=le,Qt.length=ue,Qt.squaredLength=ce,Qt.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},Qt.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},Qt.normalize=function(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t},Qt.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},Qt.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},Qt.lerp=function(t,e,r,n){var i=e[0],a=e[1];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t},Qt.random=function(t,e){e=e||1;var r=2*ee.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},Qt.transformMat2=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t},Qt.transformMat2d=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t},Qt.transformMat3=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t},Qt.transformMat4=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},Qt.rotate=function(t,e,r,n){var i=e[0]-r[0],a=e[1]-r[1],o=Math.sin(n),s=Math.cos(n);return t[0]=i*s-a*o+r[0],t[1]=i*o+a*s+r[1],t},Qt.angle=function(t,e){var r=t[0],n=t[1],i=e[0],a=e[1],o=Math.sqrt(r*r+n*n)*Math.sqrt(i*i+a*a);return Math.acos(Math.min(Math.max(o&&(r*i+n*a)/o,-1),1))},Qt.zero=function(t){return t[0]=0,t[1]=0,t},Qt.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},Qt.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Qt.equals=function(t,e){var r=t[0],n=t[1],i=e[0],a=e[1];return Math.abs(r-i)<=ee.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-a)<=ee.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))},Qt.forEach=Qt.sqrLen=Qt.sqrDist=Qt.dist=Qt.div=Qt.mul=Qt.sub=Qt.len=void 0;var ee=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==te(t)&&"function"!=typeof t)return{default:t};var r=re(void 0);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}(r);function re(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(re=function(t){return t?r:e})(t)}function ne(){var t=new ee.ARRAY_TYPE(2);return ee.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function ie(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function ae(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function oe(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function se(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1])}function le(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function ue(t){return Math.hypot(t[0],t[1])}function ce(t){var e=t[0],r=t[1];return e*e+r*r}Qt.len=ue,Qt.sub=ie,Qt.mul=ae,Qt.div=oe,Qt.dist=se,Qt.sqrDist=le,Qt.sqrLen=ce;var he=function(){var t=ne();return function(e,r,n,i,a,o){var s,l;for(r||(r=2),n||(n=0),l=i?Math.min(i*r+n,e.length):e.length,s=n;s<l;s+=r)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}();function pe(t){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(t)}Qt.forEach=he,Object.defineProperty(e,"__esModule",{value:!0});var fe=e.vec4=Pe=e.vec3=e.vec2=e.quat2=_e=e.quat=be=e.mat4=xe=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0,de=Ce(r);e.glMatrix=de;var ye=Ce(s);e.mat2=ye;var me=Ce(f);e.mat2d=me;var ge=Ce(v),xe=e.mat3=ge,ve=Ce(S),be=e.mat4=ve,we=Ce(R),_e=e.quat=we,Ae=Ce(jt);e.quat2=Ae;var Me=Ce(Qt);e.vec2=Me;var Se=Ce(V),Pe=e.vec3=Se,Ie=Ce(H);function Ee(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(Ee=function(t){return t?r:e})(t)}function Ce(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==pe(t)&&"function"!=typeof t)return{default:t};var r=Ee(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}fe=e.vec4=Ie;var De=ke;function ke(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=r,this.p2y=n}ke.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var r=t,n=0;n<8;n++){var i=this.sampleCurveX(r)-t;if(Math.abs(i)<e)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r-=i/a}var o=0,s=1;for(r=t,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-t)<e));n++)t>i?o=r:s=r,r=.5*(s-o)+o;return r},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var Te=t(De),Le=Be;function Be(t,e){this.x=t,this.y=e}Be.prototype={clone:function(){return new Be(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=n,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-n*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Be.convert=function(t){return t instanceof Be?t:Array.isArray(t)?new Be(t[0],t[1]):t};var ze=t(Le);const Re=Math.PI/180,Ve=180/Math.PI;function Fe(t){return t*Re}function Oe(t){return t*Ve}function je(t,e,r){return Math.min(r,Math.max(e,t))}function Ne(t,e,r){return(r=je((r-t)/(e-t),0,1))*r*(3-2*r)}function Ue(t,e,r){const n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function qe(t){const e=[];for(const r in t)e.push(t[r]);return e}function $e(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}function Ge(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function Ye(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function Xe(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function Ze(t,e){return-1!==t.indexOf(e,t.length-e.length)}function We(t,e,r){const n={};for(const r in t)n[r]=e.call(this,t[r],r,t);return n}function Je(t){return Array.isArray(t)?t.map(Je):"object"==typeof t&&t?We(t,Je):t}new Te(.25,.1,.25,1);const Ke={};function He(t){Ke[t]||("undefined"!=typeof console&&console.warn(t),Ke[t]=!0)}function Qe(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function tr(t){let e=0;for(let r,n,i=0,a=t.length,o=a-1;i<a;o=i++)r=t[i],n=t[o],e+=(n.x-r.x)*(r.y+n.y);return e}function er(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function rr(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,r,n,i)=>{const a=n||i;return e[r]=!a||a.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}function nr(t){try{const e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}function ir(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}function ar(t,e,r,n){for(;e<r;){const i=e+r>>1;t[i]<n?e=i+1:r=i}return e}function or(t,e,r,n){for(;e<r;){const i=e+r>>1;t[i]<=n?e=i+1:r=i}return e}var sr=ur,lr=3;function ur(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(r=i[2]);for(var a=0;a<this.d*this.d;a++){var o=i[lr+a],s=i[lr+a+1];n.push(o===s?null:i.subarray(o,s))}var l=i[lr+n.length+1];this.keys=i.subarray(i[lr+n.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var u=0;u<this.d*this.d;u++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var c=r/e*t;this.min=-c,this.max=t+c}ur.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},ur.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ur.prototype._insertCell=function(t,e,r,n,i,a){this.cells[i].push(a)},ur.prototype.query=function(t,e,r,n,i){var a=this.min,o=this.max;if(t<=a&&e<=a&&o<=r&&o<=n&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,r,n,this._queryCell,s,{},i),s},ur.prototype._queryCell=function(t,e,r,n,i,a,o,s){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var p=l[h];if(void 0===o[p]){var f=4*p;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):t<=c[f+2]&&e<=c[f+3]&&r>=c[f+0]&&n>=c[f+1])?(o[p]=!0,a.push(u[p])):o[p]=!1}}},ur.prototype._forEachCell=function(t,e,r,n,i,a,o,s){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(r),h=this._convertToCellCoord(n),p=l;p<=c;p++)for(var f=u;f<=h;f++){var d=this.d*f+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(f),this._convertFromCellCoord(p+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,r,n,d,a,o,s))return}},ur.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},ur.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},ur.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=lr+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(e+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=e,o=0;o<t.length;o++){var s=t[o];i[lr+o]=a,i.set(s,a),a+=s.length}return i[lr+t.length]=a,i.set(this.keys,a),i[lr+t.length+1]=a+=this.keys.length,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var cr,hr=t(sr),pr={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function fr(t){return(t=Math.round(t))<0?0:t>255?255:t}function dr(t){return fr("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function yr(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function mr(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{cr={}.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in pr)return pr[r].slice();if("#"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=r.indexOf("("),i=r.indexOf(")");if(-1!==n&&i+1===r.length){var a=r.substr(0,n),o=r.substr(n+1,i-(n+1)).split(","),s=1;switch(a){case"rgba":if(4!==o.length)return null;s=yr(o.pop());case"rgb":return 3!==o.length?null:[dr(o[0]),dr(o[1]),dr(o[2]),s];case"hsla":if(4!==o.length)return null;s=yr(o.pop());case"hsl":if(3!==o.length)return null;var l=(parseFloat(o[0])%360+360)%360/360,u=yr(o[1]),c=yr(o[2]),h=c<=.5?c*(u+1):c+u-c*u,p=2*c-h;return[fr(255*mr(p,h,l+1/3)),fr(255*mr(p,h,l)),fr(255*mr(p,h,l-1/3)),s];default:return null}}return null}}catch(t){}class Color{constructor(t,e,r,n=1){this.r=t,this.g=e,this.b=r,this.a=n}static parse(t){if(!t)return;if(t instanceof Color)return t;if("string"!=typeof t)return;const e=cr(t);return e?new Color(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,r,n]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(r)},${n})`}toArray(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]}toArray01(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[t/n,e/n,r/n,n]}toArray01Scaled(t){const{r:e,g:r,b:n,a:i}=this;return 0===i?[0,0,0]:[e/i*t,r/i*t,n/i*t]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:r,a:n}=this;return[t,e,r,n]}toArray01Linear(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[Math.pow(t/n,2.2),Math.pow(e/n,2.2),Math.pow(r/n,2.2),n]}}function gr(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}Color.black=new Color(0,0,0,1),Color.white=new Color(1,1,1,1),Color.transparent=new Color(0,0,0,0),Color.red=new Color(1,0,0,1),Color.blue=new Color(0,0,1,1);class ParsingError extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class Scope{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,r]of e)this.bindings[t]=r}concat(t){return new Scope(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const xr={kind:"null"},vr={kind:"number"},br={kind:"string"},wr={kind:"boolean"},_r={kind:"color"},Ar={kind:"object"},Mr={kind:"value"},Sr={kind:"collator"},Pr={kind:"formatted"},Ir={kind:"resolvedImage"};function Er(t,e){return{kind:"array",itemType:t,N:e}}function Cr(t){if("array"===t.kind){const e=Cr(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const Dr=[xr,vr,br,wr,_r,Pr,Ar,Er(Mr),Ir];function kr(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!kr(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of Dr)if(!kr(t,e))return null}return`Expected ${Cr(t)} but found ${Cr(e)} instead.`}function Tr(t,e){return e.some((e=>e.kind===t.kind))}function Lr(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}class Collator{constructor(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class FormattedSection{constructor(t,e,r,n,i){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=r,this.fontStack=n,this.textColor=i}}class Formatted{constructor(t){this.sections=t}static fromString(t){return new Formatted([new FormattedSection(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.namePrimary.length))}static factory(t){return t instanceof Formatted?t:Formatted.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.namePrimary]);continue}t.push(e.text);const r={};e.fontStack&&(r["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(r["font-scale"]=e.scale),e.textColor&&(r["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(r)}return t}}class ResolvedImage{constructor(t){this.namePrimary=t.namePrimary,t.nameSecondary&&(this.nameSecondary=t.nameSecondary),this.available=t.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(t,e){return t?new ResolvedImage({namePrimary:t,nameSecondary:e,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function Br(t,e,r,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function zr(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Color)return!0;if(t instanceof Collator)return!0;if(t instanceof Formatted)return!0;if(t instanceof ResolvedImage)return!0;if(Array.isArray(t)){for(const e of t)if(!zr(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!zr(t[e]))return!1;return!0}return!1}function Rr(t){if(null===t)return xr;if("string"==typeof t)return br;if("boolean"==typeof t)return wr;if("number"==typeof t)return vr;if(t instanceof Color)return _r;if(t instanceof Collator)return Sr;if(t instanceof Formatted)return Pr;if(t instanceof ResolvedImage)return Ir;if(Array.isArray(t)){const e=t.length;let r;for(const e of t){const t=Rr(e);if(r){if(r===t)continue;r=Mr;break}r=t}return Er(r||Mr,e)}return Ar}function Vr(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Color||t instanceof Formatted||t instanceof ResolvedImage?t.toString():JSON.stringify(t)}class Literal{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!zr(t[1]))return e.error("invalid value");const r=t[1];let n=Rr(r);const i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new Literal(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Color?["rgba"].concat(this.value.toArray()):this.value instanceof Formatted?this.value.serialize():this.value}}class RuntimeError{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Fr={string:br,number:vr,boolean:wr,object:Ar};class Assertion{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let r,n=1;const i=t[0];if("array"===i){let i,a;if(t.length>2){const r=t[1];if("string"!=typeof r||!(r in Fr)||"object"===r)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=Fr[r],n++}else i=Mr;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],n++}r=Er(i,a)}else r=Fr[i];const a=[];for(;n<t.length;n++){const r=e.parse(t[n],n,Mr);if(!r)return null;a.push(r)}return new Assertion(r,a)}evaluate(t){for(let e=0;e<this.args.length;e++){const r=this.args[e].evaluate(t);if(!kr(this.type,Rr(r)))return r;if(e===this.args.length-1)throw new RuntimeError(`Expected value to be of type ${Cr(this.type)}, but found ${Cr(Rr(r))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);const n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((t=>t.serialize())))}}class FormatExpression{constructor(t){this.type=Pr,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");const n=[];let i=!1;for(let r=1;r<=t.length-1;++r){const a=t[r];if(i&&"object"==typeof a&&!Array.isArray(a)){i=!1;let t=null;if(a["font-scale"]&&(t=e.parse(a["font-scale"],1,vr),!t))return null;let r=null;if(a["text-font"]&&(r=e.parse(a["text-font"],1,Er(br)),!r))return null;let o=null;if(a["text-color"]&&(o=e.parse(a["text-color"],1,_r),!o))return null;const s=n[n.length-1];s.scale=t,s.font=r,s.textColor=o}else{const a=e.parse(t[r],1,Mr);if(!a)return null;const o=a.type.kind;if("string"!==o&&"value"!==o&&"null"!==o&&"resolvedImage"!==o)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:a,scale:null,font:null,textColor:null})}}return new FormatExpression(n)}evaluate(t){return new Formatted(this.sections.map((e=>{const r=e.content.evaluate(t);return Rr(r)===Ir?new FormattedSection("",r,null,null,null):new FormattedSection(Vr(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const r={};e.scale&&(r["font-scale"]=e.scale.serialize()),e.font&&(r["text-font"]=e.font.serialize()),e.textColor&&(r["text-color"]=e.textColor.serialize()),t.push(r)}return t}}class ImageExpression{constructor(t,e){this.type=Ir,this.inputPrimary=t,this.inputSecondary=e}static parse(t,e){if(t.length<2)return e.error("Expected two or more arguments.");const r=e.parse(t[1],1,br);if(!r)return e.error("No image name provided.");if(2===t.length)return new ImageExpression(r);const n=e.parse(t[2],1,br);return n?new ImageExpression(r,n):e.error("Secondary image variant is not a string.")}evaluate(t){const e=ResolvedImage.fromString(this.inputPrimary.evaluate(t),this.inputSecondary?this.inputSecondary.evaluate(t):void 0);return e&&t.availableImages&&(e.available=t.availableImages.indexOf(e.namePrimary)>-1,e.nameSecondary&&e.available&&t.availableImages&&(e.available=t.availableImages.indexOf(e.nameSecondary)>-1)),e}eachChild(t){t(this.inputPrimary),this.inputSecondary&&t(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function Or(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}const jr={"to-boolean":wr,"to-color":_r,"to-number":vr,"to-string":br};class Coercion{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[0],n=[];let i=xr;if("to-array"===r){if(!Array.isArray(t[1]))return null;const r=t[1].length;if(e.expectedType){if("array"!==e.expectedType.kind)return e.error(`Expected ${e.expectedType.kind} but found array.`);i=Er(e.expectedType.itemType,r)}else{if(!(r>0&&zr(t[1][0])))return null;i=Er(Rr(t[1][0]),r)}for(let a=0;a<r;a++){const r=t[1][a];let o;if("array"===Or(r))o=e.parse(r,void 0,i.itemType);else{const t=Or(r);if(t!==i.itemType.kind)return e.error(`Expected ${i.itemType.kind} but found ${t}.`);o=e.registry.literal.parse(["literal",void 0===r?null:r],e)}if(!o)return null;n.push(o)}}else{if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");i=jr[r];for(let r=1;r<t.length;r++){const i=e.parse(t[r],r,Mr);if(!i)return null;n.push(i)}}return new Coercion(i,n)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,r;for(const n of this.args){if(e=n.evaluate(t),r=null,e instanceof Color)return e;if("string"==typeof e){const r=t.parseColor(e);if(r)return r}else if(Array.isArray(e)&&(r=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Br(e[0],e[1],e[2],e[3]),!r))return new Color(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new RuntimeError(r||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const r of this.args){if(e=r.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new RuntimeError(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?Formatted.fromString(Vr(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ResolvedImage.fromString(Vr(this.args[0].evaluate(t))):"array"===this.type.kind?this.args.map((e=>e.evaluate(t))):Vr(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new FormatExpression([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ImageExpression(this.args[0]).serialize();const t="array"===this.type.kind?[]:[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Nr=["Unknown","Point","LineString","Polygon"];class EvaluationContext{constructor(t,e){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=t,this.options=e}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Nr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(t){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:n}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*e-t[0])+this.featureDistanceData.bearing[1]*(n*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Color.parse(t)),e}getConfig(t){return this.options?this.options.get(t):null}}class CompoundExpression{constructor(t,e,r,n,i){this.name=t,this.type=e,this._evaluate=r,this.args=n,this._overloadIndex=i}evaluate(t){if(!this._evaluate){const t=CompoundExpression.definitions[this.name];this._evaluate=Array.isArray(t)?t[2]:t.overloads[this._overloadIndex][1]}return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const r=t[0],n=CompoundExpression.definitions[r];if(!n)return e.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,o=[];let s=null,l=-1;for(const[n,u]of a){if(Array.isArray(n)&&n.length!==t.length-1)continue;o.push(n),l++,s=new ParsingContext(e.registry,e.path,null,e.scope,void 0,e._scope,e.options);const a=[];let c=!1;for(let e=1;e<t.length;e++){const r=t[e],i=Array.isArray(n)?n[e-1]:n.type,o=s.parse(r,1+a.length,i);if(!o){c=!0;break}a.push(o)}if(!c)if(Array.isArray(n)&&n.length!==a.length)s.error(`Expected ${n.length} arguments, but found ${a.length} instead.`);else{for(let t=0;t<a.length;t++){const e=Array.isArray(n)?n[t]:n.type,r=a[t];s.concat(t+1).checkSubtype(e,r.type)}if(0===s.errors.length)return new CompoundExpression(r,i,u,a,l)}}if(1===o.length)e.errors.push(...s.errors);else{const r=(o.length?o:a.map((([t])=>t))).map(Ur).join(" | "),n=[];for(let r=1;r<t.length;r++){const i=e.parse(t[r],1+n.length);if(!i)return null;n.push(Cr(i.type))}e.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`)}return null}static register(t,e){CompoundExpression.definitions=e;for(const r in e)t[r]=CompoundExpression}}function Ur(t){return Array.isArray(t)?`(${t.map(Cr).join(", ")})`:`(${Cr(t.type)}...)`}class CollatorExpression{constructor(t,e,r){this.type=Sr,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,wr);if(!n)return null;const i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,wr);if(!i)return null;let a=null;return r.locale&&(a=e.parse(r.locale,1,br),!a)?null:new CollatorExpression(n,i,a)}evaluate(t){return new Collator(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}var qr={exports:{}};qr.exports=function(){function t(r,n,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,l=n-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(r,n,Math.max(i,Math.floor(n-l*c/s+h)),Math.min(a,Math.floor(n+(s-l)*c/s+h)),o)}var p=r[n],f=i,d=a;for(e(r,i,n),o(r[a],p)>0&&e(r,i,a);f<d;){for(e(r,f,d),f++,d--;o(r[f],p)<0;)f++;for(;o(r[d],p)>0;)d--}0===o(r[i],p)?e(r,i,d):e(r,++d,a),d<=n&&(i=d+1),n<=d&&(a=d-1)}}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}return function(e,n,i,a,o){t(e,n,i||0,a||e.length-1,o||r)}}();var $r=t(qr.exports);function Gr(t){let e=0;for(let r,n,i=0,a=t.length,o=a-1;i<a;o=i++)r=t[i],n=t[o],e+=(n.x-r.x)*(r.y+n.y);return e}function Yr(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Xr(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Zr(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=t[0]-r[0],o=t[1]-r[1];return n*o-a*i==0&&n*a<=0&&i*o<=0}function Wr(t,e,r=!1){let n=!1;for(let s=0,l=e.length;s<l;s++){const l=e[s];for(let e=0,s=l.length,u=s-1;e<s;u=e++){const s=l[u],c=l[e];if(Zr(t,s,c))return r;(a=s)[1]>(i=t)[1]!=(o=c)[1]>i[1]&&i[0]<(o[0]-a[0])*(i[1]-a[1])/(o[1]-a[1])+a[0]&&(n=!n)}}var i,a,o;return n}function Jr(t,e,r,n){const i=n[0]-r[0],a=n[1]-r[1],o=(t[0]-r[0])*a-i*(t[1]-r[1]),s=(e[0]-r[0])*a-i*(e[1]-r[1]);return o>0&&s<0||o<0&&s>0}function Kr(t,e,r,n){return 0!=(i=[n[0]-r[0],n[1]-r[1]])[0]*(a=[e[0]-t[0],e[1]-t[1]])[1]-i[1]*a[0]&&!(!Jr(t,e,r,n)||!Jr(r,n,t,e));var i,a}const Hr=8192;function Qr(t,e){const r=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(r*i*Hr),Math.round(n*i*Hr)]}function tn(t,e){for(let r=0;r<e.length;r++)if(Wr(t,e[r]))return!0;return!1}function en(t,e,r){for(const n of r)for(let r=0,i=n.length,a=i-1;r<i;a=r++)if(Kr(t,e,n[a],n[r]))return!0;return!1}function rn(t,e){for(let r=0;r<t.length;++r)if(!Wr(t[r],e))return!1;for(let r=0;r<t.length-1;++r)if(en(t[r],t[r+1],e))return!1;return!0}function nn(t,e){for(let r=0;r<e.length;r++)if(rn(t,e[r]))return!0;return!1}function an(t,e,r){const n=[];for(let i=0;i<t.length;i++){const a=[];for(let n=0;n<t[i].length;n++){const o=Qr(t[i][n],r);Yr(e,o),a.push(o)}n.push(a)}return n}function on(t,e,r){const n=[];for(let i=0;i<t.length;i++){const a=an(t[i],e,r);n.push(a)}return n}function sn(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){const e=.5*n;let i=t[0]-r[0]>e?-n:r[0]-t[0]>e?n:0;0===i&&(i=t[0]-r[2]>e?-n:r[2]-t[0]>e?n:0),t[0]+=i}Yr(e,t)}function ln(t,e,r,n){const i=Math.pow(2,n.z)*Hr,a=[n.x*Hr,n.y*Hr],o=[];if(!t)return o;for(const n of t)for(const t of n){const n=[t.x+a[0],t.y+a[1]];sn(n,e,r,i),o.push(n)}return o}function un(t,e,r,n){const i=Math.pow(2,n.z)*Hr,a=[n.x*Hr,n.y*Hr],o=[];if(!t)return o;for(const r of t){const t=[];for(const n of r){const r=[n.x+a[0],n.y+a[1]];Yr(e,r),t.push(r)}o.push(t)}if(e[2]-e[0]<=i/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of o)for(const n of t)sn(n,e,r,i)}var s;return o}class Within{constructor(t,e){this.type=wr,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(zr(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const r=e.features[t].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new Within(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new Within(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new Within(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const a=an(e.coordinates,n,i),o=ln(t.geometry(),r,n,i);if(!Xr(r,n))return!1;for(const t of o)if(!Wr(t,a))return!1}if("MultiPolygon"===e.type){const a=on(e.coordinates,n,i),o=ln(t.geometry(),r,n,i);if(!Xr(r,n))return!1;for(const t of o)if(!tn(t,a))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const a=an(e.coordinates,n,i),o=un(t.geometry(),r,n,i);if(!Xr(r,n))return!1;for(const t of o)if(!rn(t,a))return!1}if("MultiPolygon"===e.type){const a=on(e.coordinates,n,i),o=un(t.geometry(),r,n,i);if(!Xr(r,n))return!1;for(const t of o)if(!nn(t,a))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var cn={exports:{}};cn.exports=function(){var t={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},e=1/298.257223563,r=e*(2-e),n=Math.PI/180,i=function(e,i){if(void 0===e)throw new Error("No latitude given.");if(i&&!t[i])throw new Error("Unknown unit "+i+". Use one of: "+Object.keys(t).join(", "));var a=6378.137*n*(i?t[i]:1),o=Math.cos(e*n),s=1/(1-r*(1-o*o)),l=Math.sqrt(s);this.kx=a*l*o,this.ky=a*l*s*(1-r)},a={units:{configurable:!0}};function o(t,e){return t[0]===e[0]&&t[1]===e[1]}function s(t,e,r){var n=l(e[0]-t[0]);return[t[0]+n*r,t[1]+(e[1]-t[1])*r]}function l(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}return i.fromTile=function(t,e,r){var a=Math.PI*(1-2*(t+.5)/Math.pow(2,e)),o=Math.atan(.5*(Math.exp(a)-Math.exp(-a)))/n;return new i(o,r)},a.units.get=function(){return t},i.prototype.distance=function(t,e){var r=l(t[0]-e[0])*this.kx,n=(t[1]-e[1])*this.ky;return Math.sqrt(r*r+n*n)},i.prototype.bearing=function(t,e){var r=l(e[0]-t[0])*this.kx;return Math.atan2(r,(e[1]-t[1])*this.ky)/n},i.prototype.destination=function(t,e,r){var i=r*n;return this.offset(t,Math.sin(i)*e,Math.cos(i)*e)},i.prototype.offset=function(t,e,r){return[t[0]+e/this.kx,t[1]+r/this.ky]},i.prototype.lineDistance=function(t){for(var e=0,r=0;r<t.length-1;r++)e+=this.distance(t[r],t[r+1]);return e},i.prototype.area=function(t){for(var e=0,r=0;r<t.length;r++)for(var n=t[r],i=0,a=n.length,o=a-1;i<a;o=i++)e+=l(n[i][0]-n[o][0])*(n[i][1]+n[o][1])*(r?-1:1);return Math.abs(e)/2*this.kx*this.ky},i.prototype.along=function(t,e){var r=0;if(e<=0)return t[0];for(var n=0;n<t.length-1;n++){var i=t[n],a=t[n+1],o=this.distance(i,a);if((r+=o)>e)return s(i,a,(e-(r-o))/o)}return t[t.length-1]},i.prototype.pointToSegmentDistance=function(t,e,r){var n=e[0],i=e[1],a=l(r[0]-n)*this.kx,o=(r[1]-i)*this.ky,s=0;return 0===a&&0===o||((s=(l(t[0]-n)*this.kx*a+(t[1]-i)*this.ky*o)/(a*a+o*o))>1?(n=r[0],i=r[1]):s>0&&(n+=a/this.kx*s,i+=o/this.ky*s)),a=l(t[0]-n)*this.kx,o=(t[1]-i)*this.ky,Math.sqrt(a*a+o*o)},i.prototype.pointOnLine=function(t,e){for(var r,n,i,a,o=1/0,s=0;s<t.length-1;s++){var u=t[s][0],c=t[s][1],h=l(t[s+1][0]-u)*this.kx,p=(t[s+1][1]-c)*this.ky,f=0;0===h&&0===p||((f=(l(e[0]-u)*this.kx*h+(e[1]-c)*this.ky*p)/(h*h+p*p))>1?(u=t[s+1][0],c=t[s+1][1]):f>0&&(u+=h/this.kx*f,c+=p/this.ky*f));var d=(h=l(e[0]-u)*this.kx)*h+(p=(e[1]-c)*this.ky)*p;d<o&&(o=d,r=u,n=c,i=s,a=f)}return{point:[r,n],index:i,t:Math.max(0,Math.min(1,a))}},i.prototype.lineSlice=function(t,e,r){var n=this.pointOnLine(r,t),i=this.pointOnLine(r,e);if(n.index>i.index||n.index===i.index&&n.t>i.t){var a=n;n=i,i=a}var s=[n.point],l=n.index+1,u=i.index;!o(r[l],s[0])&&l<=u&&s.push(r[l]);for(var c=l+1;c<=u;c++)s.push(r[c]);return o(r[u],i.point)||s.push(i.point),s},i.prototype.lineSliceAlong=function(t,e,r){for(var n=0,i=[],a=0;a<r.length-1;a++){var o=r[a],l=r[a+1],u=this.distance(o,l);if((n+=u)>t&&0===i.length&&i.push(s(o,l,(t-(n-u))/u)),n>=e)return i.push(s(o,l,(e-(n-u))/u)),i;n>t&&i.push(l)}return i},i.prototype.bufferPoint=function(t,e){var r=e/this.ky,n=e/this.kx;return[t[0]-n,t[1]-r,t[0]+n,t[1]+r]},i.prototype.bufferBBox=function(t,e){var r=e/this.ky,n=e/this.kx;return[t[0]-n,t[1]-r,t[2]+n,t[3]+r]},i.prototype.insideBBox=function(t,e){return l(t[0]-e[0])>=0&&l(t[0]-e[2])<=0&&t[1]>=e[1]&&t[1]<=e[3]},Object.defineProperties(i,a),i}();var hn=t(cn.exports),pn={exports:{}};pn.exports=function(){var t=function(t,r){if(void 0===t&&(t=[]),void 0===r&&(r=e),this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function e(t,e){return t<e?-1:t>e?1:0}return t.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},t.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},t.prototype.peek=function(){return this.data[0]},t.prototype._up=function(t){for(var e=this.data,r=this.compare,n=e[t];t>0;){var i=t-1>>1,a=e[i];if(r(n,a)>=0)break;e[t]=a,t=i}e[t]=n},t.prototype._down=function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var a=1+(t<<1),o=e[a],s=a+1;if(s<this.length&&r(e[s],o)<0&&(a=s,o=e[s]),r(o,i)>=0)break;e[t]=o,t=a}e[t]=i},t}();var fn=t(pn.exports),dn=8192;function yn(t,e){return e.dist-t.dist}const mn=100,gn=50;function xn(t){const e=[1/0,1/0,-1/0,-1/0];if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function vn(t){return t[1]-t[0]+1}function bn(t,e){const r=t[1]>=t[0]&&t[1]<e;return r||console.warn("Distance Expression: Index is out of range"),r}function wn(t,e){if(t[0]>t[1])return[null,null];const r=vn(t);if(e){if(2===r)return[t,null];const e=Math.floor(r/2);return[[t[0],t[0]+e],[t[0]+e,t[1]]]}{if(1===r)return[t,null];const e=Math.floor(r/2)-1;return[[t[0],t[0]+e],[t[0]+e+1,t[1]]]}}function _n(t,e){const r=[1/0,1/0,-1/0,-1/0];if(!bn(e,t.length))return r;for(let n=e[0];n<=e[1];++n)Yr(r,t[n]);return r}function An(t){const e=[1/0,1/0,-1/0,-1/0];for(let r=0;r<t.length;++r)for(let n=0;n<t[r].length;++n)Yr(e,t[r][n]);return e}function Mn(t,e,r){if(xn(t)||xn(e))return NaN;let n=0,i=0;return t[2]<e[0]&&(n=e[0]-t[2]),t[0]>e[2]&&(n=t[0]-e[2]),t[1]>e[3]&&(i=t[1]-e[3]),t[3]<e[1]&&(i=e[1]-t[3]),r.distance([0,0],[n,i])}function Sn(t){return 360*t-180}function Pn(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function En(t,e){const r=Math.pow(2,e.z),n=(t.y/dn+e.y)/r;return[Sn((t.x/dn+e.x)/r),Pn(n)]}function Cn(t,e){const r=[];for(let n=0;n<t.length;++n)r.push(En(t[n],e));return r}function Dn(t,e,r){const n=r.pointOnLine(e,t).point;return r.distance(t,n)}function kn(t,e,r,n,i){const a=r.slice(n[0],n[1]+1);let o=1/0;for(let r=e[0];r<=e[1];++r)if(0===(o=Math.min(o,Dn(t[r],a,i))))return 0;return o}function Tn(t,e,r,n,i){const a=Math.min(i.pointToSegmentDistance(t,r,n),i.pointToSegmentDistance(e,r,n)),o=Math.min(i.pointToSegmentDistance(r,t,e),i.pointToSegmentDistance(n,t,e));return Math.min(a,o)}function Ln(t,e,r,n,i){if(!bn(e,t.length)||!bn(n,r.length))return NaN;let a=1/0;for(let o=e[0];o<e[1];++o)for(let e=n[0];e<n[1];++e){if(Kr(t[o],t[o+1],r[e],r[e+1]))return 0;a=Math.min(a,Tn(t[o],t[o+1],r[e],r[e+1],i))}return a}function Bn(t,e,r,n,i){if(!bn(e,t.length)||!bn(n,r.length))return NaN;let a=1/0;for(let o=e[0];o<=e[1];++o)for(let e=n[0];e<=n[1];++e)if(0===(a=Math.min(a,i.distance(t[o],r[e]))))return a;return a}function zn(t,e,r){if(Wr(t,e,!0))return 0;let n=1/0;for(const i of e){const e=i.length;if(e<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(i[0]!==i[e-1]&&0===(n=Math.min(n,r.pointToSegmentDistance(t,i[e-1],i[0]))))return n;if(0===(n=Math.min(n,Dn(t,i,r))))return n}return n}function Rn(t,e,r,n){if(!bn(e,t.length))return NaN;for(let n=e[0];n<=e[1];++n)if(Wr(t[n],r,!0))return 0;let i=1/0;for(let a=e[0];a<e[1];++a)for(const e of r)for(let r=0,o=e.length,s=o-1;r<o;s=r++){if(Kr(t[a],t[a+1],e[s],e[r]))return 0;i=Math.min(i,Tn(t[a],t[a+1],e[s],e[r],n))}return i}function Vn(t,e){for(const r of t)for(let t=0;t<=r.length-1;++t)if(Wr(r[t],e,!0))return!0;return!1}function Fn(t,e,r,n=1/0){const i=An(t),a=An(e);if(n!==1/0&&Mn(i,a,r)>=n)return n;if(Xr(i,a)){if(Vn(t,e))return 0}else if(Vn(e,t))return 0;let o=n;for(const n of t)for(let t=0,i=n.length,a=i-1;t<i;a=t++)for(const i of e)for(let e=0,s=i.length,l=s-1;e<s;l=e++){if(Kr(n[a],n[t],i[l],i[e]))return 0;o=Math.min(o,Tn(n[a],n[t],i[l],i[e],r))}return o}function On(t,e,r,n,i,a,o){if(null===a||null===o)return;const s=Mn(_n(n,a),_n(i,o),r);s<e&&t.push({dist:s,range1:a,range2:o})}function jn(t,e,r,n,i=1/0){let a=Math.min(n.distance(t[0],r[0][0]),i);if(0===a)return a;const o=new fn([{dist:0,range1:[0,t.length-1],range2:[0,0]}],yn),s=e?gn:mn,l=An(r);for(;o.length;){const i=o.pop();if(i.dist>=a)continue;const u=i.range1;if(vn(u)<=s){if(!bn(u,t.length))return NaN;if(e){const e=Rn(t,u,r,n);if(0===(a=Math.min(a,e)))return a}else for(let e=u[0];e<=u[1];++e){const i=zn(t[e],r,n);if(0===(a=Math.min(a,i)))return a}}else{const r=wn(u,e);if(null!==r[0]){const e=Mn(_n(t,r[0]),l,n);e<a&&o.push({dist:e,range1:r[0],range2:[0,0]})}if(null!==r[1]){const e=Mn(_n(t,r[1]),l,n);e<a&&o.push({dist:e,range1:r[1],range2:[0,0]})}}}return a}function Nn(t,e,r,n,i,a=1/0){let o=Math.min(a,i.distance(t[0],r[0]));if(0===o)return o;const s=new fn([{dist:0,range1:[0,t.length-1],range2:[0,r.length-1]}],yn),l=e?gn:mn,u=n?gn:mn;for(;s.length;){const a=s.pop();if(a.dist>=o)continue;const c=a.range1,h=a.range2;if(vn(c)<=l&&vn(h)<=u){if(!bn(c,t.length)||!bn(h,r.length))return NaN;if(e&&n?o=Math.min(o,Ln(t,c,r,h,i)):e||n?e&&!n?o=Math.min(o,kn(r,h,t,c,i)):!e&&n&&(o=Math.min(o,kn(t,c,r,h,i))):o=Math.min(o,Bn(t,c,r,h,i)),0===o)return o}else{const a=wn(c,e),l=wn(h,n);On(s,o,i,t,r,a[0],l[0]),On(s,o,i,t,r,a[0],l[1]),On(s,o,i,t,r,a[1],l[0]),On(s,o,i,t,r,a[1],l[1])}}return o}function Un(t,e,r,n,i=1/0){let a=i;const o=_n(t,[0,t.length-1]);for(const i of r)if(!(a!==1/0&&Mn(o,_n(i,[0,i.length-1]),n)>=a)&&(a=Math.min(a,Nn(t,e,i,!0,n,a)),0===a))return a;return a}function qn(t,e,r,n,i=1/0){let a=i;const o=_n(t,[0,t.length-1]);for(const i of r){if(a!==1/0&&Mn(o,An(i),n)>=a)continue;const r=jn(t,e,i,n,a);if(isNaN(r))return r;if(0===(a=Math.min(a,r)))return a}return a}function $n(t){return"Point"===t||"MultiPoint"===t||"LineString"===t||"MultiLineString"===t||"Polygon"===t||"MultiPolygon"===t}class Distance{constructor(t,e){this.type=vr,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'distance' expression requires either one argument, but found ' ${t.length-1} instead.`);if(zr(t[1])){const e=t[1];if("FeatureCollection"===e.type){for(let t=0;t<e.features.length;++t)if($n(e.features[t].geometry.type))return new Distance(e,e.features[t].geometry)}else if("Feature"===e.type){if($n(e.geometry.type))return new Distance(e,e.geometry)}else if($n(e.type))return new Distance(e,e)}return e.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(t){const e=t.geometry(),r=t.canonicalID();if(null!=e&&null!=r){if("Point"===t.geometryType())return function(t,e,r){const n=[];for(const r of t)for(const t of r)n.push(En(t,e));const i=new hn(n[0][1],"meters");return"Point"===r.type||"MultiPoint"===r.type||"LineString"===r.type?Nn(n,!1,"Point"===r.type?[r.coordinates]:r.coordinates,"LineString"===r.type,i):"MultiLineString"===r.type?Un(n,!1,r.coordinates,i):"Polygon"===r.type||"MultiPolygon"===r.type?qn(n,!1,"Polygon"===r.type?[r.coordinates]:r.coordinates,i):null}(e,r,this.geometries);if("LineString"===t.geometryType())return function(t,e,r){const n=[];for(const r of t){const t=[];for(const n of r)t.push(En(n,e));n.push(t)}const i=new hn(n[0][0][1],"meters");if("Point"===r.type||"MultiPoint"===r.type||"LineString"===r.type)return Un("Point"===r.type?[r.coordinates]:r.coordinates,"LineString"===r.type,n,i);if("MultiLineString"===r.type){let t=1/0;for(let e=0;e<r.coordinates.length;e++){const a=Un(r.coordinates[e],!0,n,i,t);if(isNaN(a))return a;if(0===(t=Math.min(t,a)))return t}return t}if("Polygon"===r.type||"MultiPolygon"===r.type){let t=1/0;for(let e=0;e<n.length;e++){const a=qn(n[e],!0,"Polygon"===r.type?[r.coordinates]:r.coordinates,i,t);if(isNaN(a))return a;if(0===(t=Math.min(t,a)))return t}return t}return null}(e,r,this.geometries);if("Polygon"===t.geometryType())return function(t,e,r){const n=[];for(const r of function(t,e){const r=t.length;if(r<=1)return[t];const n=[];let i,a;for(let e=0;e<r;e++){const r=Gr(t[e]);0!==r&&(t[e].area=Math.abs(r),void 0===a&&(a=r<0),a===r<0?(i&&n.push(i),i=[t[e]]):i.push(t[e]))}return i&&n.push(i),n}(t)){const t=[];for(let n=0;n<r.length;++n)t.push(Cn(r[n],e));n.push(t)}const i=new hn(n[0][0][0][1],"meters");if("Point"===r.type||"MultiPoint"===r.type||"LineString"===r.type)return qn("Point"===r.type?[r.coordinates]:r.coordinates,"LineString"===r.type,n,i);if("MultiLineString"===r.type){let t=1/0;for(let e=0;e<r.coordinates.length;e++){const a=qn(r.coordinates[e],!0,n,i,t);if(isNaN(a))return a;if(0===(t=Math.min(t,a)))return t}return t}return"Polygon"===r.type||"MultiPolygon"===r.type?function(t,e,r){let n=1/0;for(const i of t)for(const t of e){const e=Fn(i,t,r,n);if(isNaN(e))return e;if(0===(n=Math.min(n,e)))return n}return n}("Polygon"===r.type?[r.coordinates]:r.coordinates,n,i):null}(e,r,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Gn(t,e){switch(t){case"string":return Vr(e);case"number":return+e;case"boolean":return!!e;case"color":return Color.parse(e);case"formatted":return Formatted.fromString(Vr(e));case"resolvedImage":return ResolvedImage.fromString(Vr(e))}return e}function Yn(t,e,r,n){return void 0!==n&&(t=n*Math.round(t/n)),void 0!==e&&t<e&&(t=e),void 0!==r&&t>r&&(t=r),t}class Config{constructor(t,e,r){this.type=t,this.key=e,this.scope=r}static parse(t,e){let r=e.expectedType;if(null==r&&(r=Mr),t.length<2||t.length>3)return e.error("Invalid number of arguments for 'config' expression.");const n=e.parse(t[1],1);if(!(n instanceof Literal))return e.error("Key name of 'config' expression must be a string literal.");if(t.length>=3){const i=e.parse(t[2],2);return i instanceof Literal?new Config(r,Vr(n.value),Vr(i.value)):e.error("Scope of 'config' expression must be a string literal.")}return new Config(r,Vr(n.value))}evaluate(t){const e=[this.key,this.scope,t.scope].filter(Boolean).join(" "),r=t.getConfig(e);if(!r)return null;const{type:n,value:i,values:a,minValue:o,maxValue:s,stepValue:l}=r,u=r.default.evaluate(t);let c=u;if(i){const e=t.scope;t.scope=(e||"").split(" ").slice(1).join(" "),c=i.evaluate(t),t.scope=e}return n&&(c=Gn(n,c)),void 0===c||void 0===o&&void 0===s&&void 0===l||("number"==typeof c?c=Yn(c,o,s,l):Array.isArray(c)&&(c=c.map((t=>"number"==typeof t?Yn(t,o,s,l):t)))),void 0!==i&&void 0!==c&&a&&!a.includes(c)&&(c=u,n&&(c=Gn(n,c))),(n&&n!==this.type||void 0!==c&&Rr(c)!==this.type)&&(c=Gn(this.type.kind,c)),c}eachChild(){}outputDefined(){return!1}serialize(){const t=["config",this.key];return this.scope&&t.concat(this.key),t}}function Xn(t){if(t instanceof CompoundExpression){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Within)return!1;if(t instanceof Distance)return!1;let e=!0;return t.eachChild((t=>{e&&!Xn(t)&&(e=!1)})),e}function Zn(t){if(t instanceof CompoundExpression&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!Zn(t)&&(e=!1)})),e}function Wn(t){if(t instanceof Config)return!1;let e=!0;return t.eachChild((t=>{e&&!Wn(t)&&(e=!1)})),e}function Jn(t,e){if(t instanceof CompoundExpression&&e.indexOf(t.name)>=0)return!1;let r=!0;return t.eachChild((t=>{r&&!Jn(t,e)&&(r=!1)})),